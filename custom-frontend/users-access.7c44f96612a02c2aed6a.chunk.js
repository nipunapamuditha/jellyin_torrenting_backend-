"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[97636],{30658:function(e,n,t){var a=t(62540),c=(t(63696),t(85817));n.A=function(e){var n=e.SectionClassName,t=e.title,l=e.isBtnVisible,r=void 0!==l&&l,i=e.btnId,s=e.btnClassName,o=e.btnTitle,d=e.btnIcon;return(0,a.jsxs)("div",{className:"".concat(n," sectionTitleContainer flex align-items-center"),children:[(0,a.jsx)("h2",{className:"sectionTitle",children:t}),r&&(0,a.jsx)(c.A,{is:"emby-button",id:i,className:s,title:o,icon:d})]})}},50723:function(e,n,t){var a,c=t(62540),l=(t(63696),t(4452)),r=t.n(l),i=t(46782),s=function(){return s=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var c in n=arguments[t])Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c]);return e},s.apply(this,arguments)};!function(e){e.RIGHT="RIGHT",e.LEFT="LEFT"}(a||(a={})),n.A=function(e){var n=e.className,t=e.title,l=e.icon,o=e.iconClassName,d=e.iconPos,u=e.onClick,h=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)n.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(t[a[c]]=e[a[c]])}return t}(e,["className","title","icon","iconClassName","iconPos","onClick"]),f=r()("emby-button",n,{"show-focus":i.A.tv}),b=r()("material-icons",o,l);return(0,c.jsxs)("button",s({className:f,onClick:u},h,{children:[l&&d===a.LEFT&&(0,c.jsx)("span",{className:b,"aria-hidden":"true"}),(0,c.jsx)("span",{children:t}),l&&d===a.RIGHT&&(0,c.jsx)("span",{className:b,"aria-hidden":"true"})]}))}},58702:function(e,n,t){var a=t(62540),c=t(63696),l=t(5898),r=t(89100),i=t(84851);function s(e){return c.useCallback((function(){(0,r.navigate)(e,!0).catch((function(e){console.warn("Error navigating to dashboard url",e)}))}),[e])}n.A=function(e){var n=e.activeTab,t=s("/dashboard/users/profile"),c=s("/dashboard/users/access"),r=s("/dashboard/users/parentalcontrol"),o=s("/dashboard/users/password");return(0,a.jsxs)("div",{"data-role":"controlgroup","data-type":"horizontal",className:"localnav",children:[(0,a.jsx)(i.A,{href:"#","data-role":"button",className:"useredit"===n?"ui-btn-active":"",onClick:t,children:l.Ay.translate("Profile")}),(0,a.jsx)(i.A,{href:"#","data-role":"button",className:"userlibraryaccess"===n?"ui-btn-active":"",onClick:c,children:l.Ay.translate("TabAccess")}),(0,a.jsx)(i.A,{href:"#","data-role":"button",className:"userparentalcontrol"===n?"ui-btn-active":"",onClick:r,children:l.Ay.translate("TabParentalControl")}),(0,a.jsx)(i.A,{href:"#","data-role":"button",className:"userpassword"===n?"ui-btn-active":"",onClick:o,children:l.Ay.translate("HeaderPassword")})]})}},61726:function(e,n,t){t.r(n);var a=t(62540),c=t(63696),l=t(9055),r=t(8566),i=t(5898),s=t(71866),o=t(58702),d=t(50723),u=t(30658),h=t(76116),f=t(91281),b=t(65242),y=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,c,l=t.call(e),r=[];try{for(;(void 0===n||n-- >0)&&!(a=l.next()).done;)r.push(a.value)}catch(e){c={error:e}}finally{try{a&&!a.done&&(t=l.return)&&t.call(l)}finally{if(c)throw c.error}}return r},m=function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],a=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};n.default=function(){var e=y((0,l.ok)(),1)[0].get("userId"),n=y((0,c.useState)(""),2),v=n[0],p=n[1],A=y((0,c.useState)([]),2),C=A[0],k=A[1],N=y((0,c.useState)([]),2),x=N[0],g=N[1],w=y((0,c.useState)([]),2),E=w[0],j=w[1],I=(0,c.useMemo)((function(){return e=void 0,n=void 0,c=function(){return function(e,n){var t,a,c,l={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=i(0),r.throw=i(1),r.return=i(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function i(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,i[0]&&(l=0)),l;)try{if(t=1,a&&(c=2&i[0]?a.return:i[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,i[1])).done)return c;switch(a=0,c&&(i=[2&i[0],c.value]),i[0]){case 0:case 1:c=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((c=(c=l.trys).length>0&&c[c.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!c||i[1]>c[0]&&i[1]<c[3])){l.label=i[1];break}if(6===i[0]&&l.label<c[1]){l.label=c[1],c=i;break}if(c&&l.label<c[2]){l.label=c[2],l.ops.push(i);break}c[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],a=0}finally{t=c=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(e){switch(e.label){case 0:return[4,Promise.all([t.e(45642),t.e(45568),t.e(73233),t.e(68603)]).then(t.bind(t,73233))];case 1:return[2,e.sent().default]}}))},new((a=void 0)||(a=Promise))((function(t,l){function r(e){try{s(c.next(e))}catch(e){l(e)}}function i(e){try{s(c.throw(e))}catch(e){l(e)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(e){e(n)}))).then(r,i)}s((c=c.apply(e,n||[])).next())}));var e,n,a,c}),[]),P=(0,c.useRef)(null),S=function(e){var n=new Event("change",{bubbles:!1,cancelable:!0});e.dispatchEvent(n)},T=(0,c.useCallback)((function(e,n){var t,a,c,l,r,i,s=P.current;if(s){var o=[];try{for(var d=m(n),u=d.next();!u.done;u=d.next()){var h=u.value,f=(null===(c=e.Policy)||void 0===c?void 0:c.EnableAllFolders)||-1!=(null===(r=null===(l=e.Policy)||void 0===l?void 0:l.EnabledFolders)||void 0===r?void 0:r.indexOf(h.Id||""))?' checked="checked"':"";o.push({Id:h.Id,Name:h.Name,checkedAttribute:f})}}catch(e){t={error:e}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(t)throw t.error}}g(o);var b=s.querySelector(".chkEnableAllFolders");b.checked=Boolean(null===(i=e.Policy)||void 0===i?void 0:i.EnableAllFolders),S(b)}else console.error("[userlibraryaccess] Unexpected null page reference")}),[]),L=(0,c.useCallback)((function(e,n){var t,a,c,l,r,i,s=P.current;if(s){var o=[];try{for(var d=m(n),u=d.next();!u.done;u=d.next()){var h=u.value,f=(null===(c=e.Policy)||void 0===c?void 0:c.EnableAllChannels)||-1!=(null===(r=null===(l=e.Policy)||void 0===l?void 0:l.EnabledChannels)||void 0===r?void 0:r.indexOf(h.Id||""))?' checked="checked"':"";o.push({Id:h.Id,Name:h.Name,checkedAttribute:f})}}catch(e){t={error:e}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(t)throw t.error}}k(o),n.length?s.querySelector(".channelAccessContainer").classList.remove("hide"):s.querySelector(".channelAccessContainer").classList.add("hide");var b=s.querySelector(".chkEnableAllChannels");b.checked=Boolean(null===(i=e.Policy)||void 0===i?void 0:i.EnableAllChannels),S(b)}else console.error("[userlibraryaccess] Unexpected null page reference")}),[]),O=(0,c.useCallback)((function(e,n){var t,a,c,l,r,i,s,o=P.current;if(o){var d=[];try{for(var u=m(n),h=u.next();!h.done;h=u.next()){var f=h.value,b=(null===(c=e.Policy)||void 0===c?void 0:c.EnableAllDevices)||-1!=(null===(r=null===(l=e.Policy)||void 0===l?void 0:l.EnabledDevices)||void 0===r?void 0:r.indexOf(f.Id||""))?' checked="checked"':"";d.push({Id:f.Id,Name:f.Name,AppName:f.AppName,CustomName:f.CustomName,checkedAttribute:b})}}catch(e){t={error:e}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(t)throw t.error}}j(d);var y=o.querySelector(".chkEnableAllDevices");y.checked=Boolean(null===(i=e.Policy)||void 0===i?void 0:i.EnableAllDevices),S(y),(null===(s=e.Policy)||void 0===s?void 0:s.IsAdministrator)?o.querySelector(".deviceAccessContainer").classList.add("hide"):o.querySelector(".deviceAccessContainer").classList.remove("hide")}else console.error("[userlibraryaccess] Unexpected null page reference")}),[]),F=(0,c.useCallback)((function(e,n,t,a){p(e.Name||""),I.then((function(n){return n.setTitle(e.Name)})),L(e,t),T(e,n),O(e,a),r.Ay.hide()}),[L,O,T]),q=(0,c.useCallback)((function(){r.Ay.show();var n=e?window.ApiClient.getUser(e):Promise.resolve({Configuration:{}}),t=window.ApiClient.getJSON(window.ApiClient.getUrl("Library/MediaFolders",{IsHidden:!1})),a=window.ApiClient.getJSON(window.ApiClient.getUrl("Channels")),c=window.ApiClient.getJSON(window.ApiClient.getUrl("Devices"));Promise.all([n,t,a,c]).then((function(e){F(e[0],e[1].Items,e[2].Items,e[3].Items)})).catch((function(e){console.error("[userlibraryaccess] failed to load data",e)}))}),[F,e]);return(0,c.useEffect)((function(){var n=P.current;if(n){q();var t=function(){r.Ay.hide(),(0,s.A)(i.Ay.translate("SettingsSaved"))};n.querySelector(".chkEnableAllDevices").addEventListener("change",(function(){n.querySelector(".deviceAccessListContainer").classList.toggle("hide",this.checked)})),n.querySelector(".chkEnableAllChannels").addEventListener("change",(function(){n.querySelector(".channelAccessListContainer").classList.toggle("hide",this.checked)})),n.querySelector(".chkEnableAllFolders").addEventListener("change",(function(){n.querySelector(".folderAccessListContainer").classList.toggle("hide",this.checked)})),n.querySelector(".userLibraryAccessForm").addEventListener("submit",(function(a){if(e)return r.Ay.show(),window.ApiClient.getUser(e).then((function(e){!function(e){if(!e.Id)throw new Error("Unexpected null user.Id");if(!e.Policy)throw new Error("Unexpected null user.Policy");e.Policy.EnableAllFolders=n.querySelector(".chkEnableAllFolders").checked,e.Policy.EnabledFolders=e.Policy.EnableAllFolders?[]:Array.prototype.filter.call(n.querySelectorAll(".chkFolder"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")})),e.Policy.EnableAllChannels=n.querySelector(".chkEnableAllChannels").checked,e.Policy.EnabledChannels=e.Policy.EnableAllChannels?[]:Array.prototype.filter.call(n.querySelectorAll(".chkChannel"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")})),e.Policy.EnableAllDevices=n.querySelector(".chkEnableAllDevices").checked,e.Policy.EnabledDevices=e.Policy.EnableAllDevices?[]:Array.prototype.filter.call(n.querySelectorAll(".chkDevice"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")})),e.Policy.BlockedChannels=null,e.Policy.BlockedMediaFolders=null,window.ApiClient.updateUserPolicy(e.Id,e.Policy).then((function(){t()})).catch((function(e){console.error("[userlibraryaccess] failed to update user policy",e)}))}(e)})).catch((function(e){console.error("[userlibraryaccess] failed to fetch user",e)})),a.preventDefault(),a.stopPropagation(),!1;console.error("[userlibraryaccess] missing user id")}))}else console.error("[userlibraryaccess] Unexpected null page reference")}),[q]),(0,a.jsx)(b.A,{id:"userLibraryAccessPage",className:"mainAnimatedPage type-interior",children:(0,a.jsxs)("div",{ref:P,className:"content-primary",children:[(0,a.jsx)("div",{className:"verticalSection",children:(0,a.jsx)(u.A,{title:v})}),(0,a.jsx)(o.A,{activeTab:"userlibraryaccess"}),(0,a.jsxs)("form",{className:"userLibraryAccessForm",children:[(0,a.jsx)(h.A,{containerClassName:"folderAccessContainer",headerTitle:"HeaderLibraryAccess",checkBoxClassName:"chkEnableAllFolders",checkBoxTitle:"OptionEnableAccessToAllLibraries",listContainerClassName:"folderAccessListContainer",accessClassName:"folderAccess",listTitle:"HeaderLibraries",description:"LibraryAccessHelp",children:x.map((function(e){return(0,a.jsx)(f.A,{className:"chkFolder",itemId:e.Id,itemName:e.Name,itemCheckedAttribute:e.checkedAttribute},e.Id)}))}),(0,a.jsx)(h.A,{containerClassName:"channelAccessContainer hide",headerTitle:"HeaderChannelAccess",checkBoxClassName:"chkEnableAllChannels",checkBoxTitle:"OptionEnableAccessToAllChannels",listContainerClassName:"channelAccessListContainer",accessClassName:"channelAccess",listTitle:"Channels",description:"ChannelAccessHelp",children:C.map((function(e){return(0,a.jsx)(f.A,{className:"chkChannel",itemId:e.Id,itemName:e.Name,itemCheckedAttribute:e.checkedAttribute},e.Id)}))}),(0,a.jsx)(h.A,{containerClassName:"deviceAccessContainer hide",headerTitle:"HeaderDeviceAccess",checkBoxClassName:"chkEnableAllDevices",checkBoxTitle:"OptionEnableAccessFromAllDevices",listContainerClassName:"deviceAccessListContainer",accessClassName:"deviceAccess",listTitle:"HeaderDevices",description:"DeviceAccessHelp",children:E.map((function(e){return(0,a.jsx)(f.A,{className:"chkDevice",itemId:e.Id,itemName:e.CustomName||e.Name,itemAppName:e.AppName,itemCheckedAttribute:e.checkedAttribute},e.Id)}))}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{children:(0,a.jsx)(d.A,{type:"submit",className:"raised button-submit block",title:i.Ay.translate("Save")})})]})]})})}},76116:function(e,n,t){var a=t(62540),c=(t(63696),t(5898)),l=t(91281);n.A=function(e){var n=e.containerClassName,t=e.headerTitle,r=e.checkBoxClassName,i=e.checkBoxTitle,s=e.listContainerClassName,o=e.accessClassName,d=e.listTitle,u=e.description,h=e.children;return(0,a.jsxs)("div",{className:n,children:[(0,a.jsx)("h2",{children:c.Ay.translate(t)}),(0,a.jsx)(l.A,{labelClassName:"checkboxContainer",className:r,title:i}),(0,a.jsxs)("div",{className:s,children:[(0,a.jsxs)("div",{className:o,children:[(0,a.jsx)("h3",{className:"checkboxListLabel",children:c.Ay.translate(d)}),(0,a.jsx)("div",{className:"checkboxList paperList",style:{padding:".5em 1em"},children:h})]}),(0,a.jsx)("div",{className:"fieldDescription",children:c.Ay.translate(u)})]})]})}},85817:function(e,n,t){var a=t(62540),c=(t(63696),t(5898));n.A=function(e){var n=e.is,t=e.id,l=e.className,r=e.title,i=e.icon,s=e.dataIndex,o=e.dataTag,d=e.dataProfileid,u=e.onClick,h=function(e){var n=e.id,t=e.className,a=e.title,c=e.icon,l=e.dataIndex,r=e.dataTag,i=e.dataProfileid;return{__html:'<button\n        is="'.concat(e.is,'"\n        type="button"\n        ').concat(n,'\n        class="').concat(t,'"\n        ').concat(a,"\n        ").concat(l,"\n        ").concat(r,"\n        ").concat(i,'\n    >\n        <span class="material-icons ').concat(c,'" aria-hidden="true"></span>\n    </button>')}}({is:n,id:t?'id="'.concat(t,'"'):"",className:l,title:r?'title="'.concat(c.Ay.translate(r),'"'):"",icon:i,dataIndex:s||0===s?'data-index="'.concat(s,'"'):"",dataTag:o?'data-tag="'.concat(o,'"'):"",dataProfileid:d?'data-profileid="'.concat(d,'"'):""});return void 0!==u?(0,a.jsx)("button",{style:{all:"unset"},dangerouslySetInnerHTML:h,onClick:u}):(0,a.jsx)("div",{dangerouslySetInnerHTML:h})}},91281:function(e,n,t){var a=t(62540),c=t(22696),l=t.n(c),r=(t(63696),t(5898)),i=function(e){var n=e.labelClassName,t=e.className,a=e.id,c=e.dataFilter,l=e.dataItemType,r=e.dataId,i=e.checkedAttribute,s=e.renderContent;return{__html:"<label ".concat(n,'>\n        <input\n            is="emby-checkbox"\n            type="checkbox"\n            class="').concat(t,'"\n            ').concat(a,"\n            ").concat(c,"\n            ").concat(l,"\n            ").concat(r,"\n            ").concat(i,"\n        />\n        ").concat(s,"\n    </label>")}};n.A=function(e){var n=e.labelClassName,t=e.className,c=e.elementId,s=e.dataFilter,o=e.itemType,d=e.itemId,u=e.itemAppName,h=e.itemCheckedAttribute,f=e.itemName,b=e.title,y=u?"- ".concat(u):"",m=f?"<span>".concat(l()(f||"")," ").concat(y,"</span>"):"<span>".concat(r.Ay.translate(b),"</span>");return(0,a.jsx)("div",{className:"sectioncheckbox",dangerouslySetInnerHTML:i({labelClassName:n?"class='".concat(n,"'"):"",className:t,id:c?"id='".concat(c,"'"):"",dataFilter:s?"data-filter='".concat(s,"'"):"",dataItemType:o?"data-itemtype='".concat(o,"'"):"",dataId:d?"data-id='".concat(d,"'"):"",checkedAttribute:h||"",renderContent:m})})}}}]);