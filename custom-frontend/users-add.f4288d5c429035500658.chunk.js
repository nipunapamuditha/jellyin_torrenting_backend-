"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[99075],{30658:function(e,n,t){var a=t(62540),l=(t(63696),t(85817));n.A=function(e){var n=e.SectionClassName,t=e.title,r=e.isBtnVisible,c=void 0!==r&&r,s=e.btnId,i=e.btnClassName,o=e.btnTitle,d=e.btnIcon;return(0,a.jsxs)("div",{className:"".concat(n," sectionTitleContainer flex align-items-center"),children:[(0,a.jsx)("h2",{className:"sectionTitle",children:t}),c&&(0,a.jsx)(l.A,{is:"emby-button",id:s,className:i,title:o,icon:d})]})}},35175:function(e,n,t){t.r(n);var a=t(62540),l=t(63696),r=t(89100),c=t(5898),s=t(8566),i=t(71866),o=t(30658),d=t(42301),u=t(50723),h=t(76116),m=t(91281),f=t(65242),p=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,l,r=t.call(e),c=[];try{for(;(void 0===n||n-- >0)&&!(a=r.next()).done;)c.push(a.value)}catch(e){l={error:e}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return c};n.default=function(){var e=p((0,l.useState)([]),2),n=e[0],t=e[1],y=p((0,l.useState)([]),2),b=y[0],A=y[1],v=(0,l.useRef)(null),C=function(e){return e.map((function(e){return{Id:e.Id,Name:e.Name}}))},x=(0,l.useCallback)((function(e){var n=v.current;if(n){var t=C(e);A(t),n.querySelector(".folderAccess").dispatchEvent(new CustomEvent("create")),n.querySelector(".chkEnableAllFolders").checked=!1}else console.error("Unexpected null reference")}),[]),N=(0,l.useCallback)((function(e){var n=v.current;if(n){var a=C(e);t(a),n.querySelector(".channelAccess").dispatchEvent(new CustomEvent("create"));var l=n.querySelector(".channelAccessContainer");a.length?l.classList.remove("hide"):l.classList.add("hide"),n.querySelector(".chkEnableAllChannels").checked=!1}else console.error("Unexpected null reference")}),[]),k=(0,l.useCallback)((function(){var e=v.current;if(e){e.querySelector("#txtUsername").value="",e.querySelector("#txtPassword").value="",s.Ay.show();var n=window.ApiClient.getJSON(window.ApiClient.getUrl("Library/MediaFolders",{IsHidden:!1})),t=window.ApiClient.getJSON(window.ApiClient.getUrl("Channels"));Promise.all([n,t]).then((function(e){x(e[0].Items),N(e[1].Items),s.Ay.hide()})).catch((function(e){console.error("[usernew] failed to load data",e)}))}else console.error("Unexpected null reference")}),[N,x]);return(0,l.useEffect)((function(){var e=v.current;e?(k(),e.querySelector(".chkEnableAllChannels").addEventListener("change",(function(){var n=e.querySelector(".channelAccessListContainer");this.checked?n.classList.add("hide"):n.classList.remove("hide")})),e.querySelector(".chkEnableAllFolders").addEventListener("change",(function(){var n=e.querySelector(".folderAccessListContainer");this.checked?n.classList.add("hide"):n.classList.remove("hide")})),e.querySelector(".newUserProfileForm").addEventListener("submit",(function(n){var t;return s.Ay.show(),(t={}).Name=e.querySelector("#txtUsername").value.trim(),t.Password=e.querySelector("#txtPassword").value,window.ApiClient.createUser(t).then((function(n){if(!n.Id||!n.Policy)throw new Error("Unexpected null user id or policy");n.Policy.EnableAllFolders=e.querySelector(".chkEnableAllFolders").checked,n.Policy.EnabledFolders=[],n.Policy.EnableAllFolders||(n.Policy.EnabledFolders=Array.prototype.filter.call(e.querySelectorAll(".chkFolder"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")}))),n.Policy.EnableAllChannels=e.querySelector(".chkEnableAllChannels").checked,n.Policy.EnabledChannels=[],n.Policy.EnableAllChannels||(n.Policy.EnabledChannels=Array.prototype.filter.call(e.querySelectorAll(".chkChannel"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")}))),window.ApiClient.updateUserPolicy(n.Id,n.Policy).then((function(){r.default.navigate("/dashboard/users/profile?userId="+n.Id).catch((function(e){console.error("[usernew] failed to navigate to edit user page",e)}))})).catch((function(e){console.error("[usernew] failed to update user policy",e)}))}),(function(){(0,i.A)(c.Ay.translate("ErrorDefault")),s.Ay.hide()})),n.preventDefault(),n.stopPropagation(),!1})),e.querySelector("#btnCancel").addEventListener("click",(function(){window.history.back()}))):console.error("Unexpected null reference")}),[k]),(0,a.jsx)(f.A,{id:"newUserPage",className:"mainAnimatedPage type-interior",children:(0,a.jsxs)("div",{ref:v,className:"content-primary",children:[(0,a.jsx)("div",{className:"verticalSection",children:(0,a.jsx)(o.A,{title:c.Ay.translate("HeaderAddUser")})}),(0,a.jsxs)("form",{className:"newUserProfileForm",children:[(0,a.jsx)("div",{className:"inputContainer",children:(0,a.jsx)(d.A,{type:"text",id:"txtUsername",label:c.Ay.translate("LabelName"),required:!0})}),(0,a.jsx)("div",{className:"inputContainer",children:(0,a.jsx)(d.A,{type:"password",id:"txtPassword",label:c.Ay.translate("LabelPassword")})}),(0,a.jsx)(h.A,{containerClassName:"folderAccessContainer",headerTitle:"HeaderLibraryAccess",checkBoxClassName:"chkEnableAllFolders",checkBoxTitle:"OptionEnableAccessToAllLibraries",listContainerClassName:"folderAccessListContainer",accessClassName:"folderAccess",listTitle:"HeaderLibraries",description:"LibraryAccessHelp",children:b.map((function(e){return(0,a.jsx)(m.A,{className:"chkFolder",itemId:e.Id,itemName:e.Name},e.Id)}))}),(0,a.jsx)(h.A,{containerClassName:"channelAccessContainer verticalSection-extrabottompadding hide",headerTitle:"HeaderChannelAccess",checkBoxClassName:"chkEnableAllChannels",checkBoxTitle:"OptionEnableAccessToAllChannels",listContainerClassName:"channelAccessListContainer",accessClassName:"channelAccess",listTitle:"Channels",description:"ChannelAccessHelp",children:n.map((function(e){return(0,a.jsx)(m.A,{className:"chkChannel",itemId:e.Id,itemName:e.Name},e.Id)}))}),(0,a.jsxs)("div",{children:[(0,a.jsx)(u.A,{type:"submit",className:"raised button-submit block",title:c.Ay.translate("Save")}),(0,a.jsx)(u.A,{type:"button",id:"btnCancel",className:"raised button-cancel block",title:c.Ay.translate("ButtonCancel")})]})]})]})})}},42301:function(e,n,t){var a=t(62540),l=t(4452),r=t.n(l),c=t(63696),s=function(){return s=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e},s.apply(this,arguments)},i=(0,c.forwardRef)((function(e,n){var t=e.id,l=e.label,i=e.className,o=e.onBlur,d=e.onFocus,u=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(t[a[l]]=e[a[l]])}return t}(e,["id","label","className","onBlur","onFocus"]),h=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,l,r=t.call(e),c=[];try{for(;(void 0===n||n-- >0)&&!(a=r.next()).done;)c.push(a.value)}catch(e){l={error:e}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return c}((0,c.useState)(!1),2),m=h[0],f=h[1],p=(0,c.useCallback)((function(e){f(!1),null==o||o(e)}),[o]),y=(0,c.useCallback)((function(e){f(!0),null==d||d(e)}),[d]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("label",{htmlFor:t,className:r()("inputLabel",{inputLabelUnfocused:!m,inputLabelFocused:m}),children:l}),(0,a.jsx)("input",s({ref:n,id:t,className:r()("emby-input",i),onBlur:p,onFocus:y},u))]})}));i.displayName="Input",n.A=i},50723:function(e,n,t){var a,l=t(62540),r=(t(63696),t(4452)),c=t.n(r),s=t(46782),i=function(){return i=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e},i.apply(this,arguments)};!function(e){e.RIGHT="RIGHT",e.LEFT="LEFT"}(a||(a={})),n.A=function(e){var n=e.className,t=e.title,r=e.icon,o=e.iconClassName,d=e.iconPos,u=e.onClick,h=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(t[a[l]]=e[a[l]])}return t}(e,["className","title","icon","iconClassName","iconPos","onClick"]),m=c()("emby-button",n,{"show-focus":s.A.tv}),f=c()("material-icons",o,r);return(0,l.jsxs)("button",i({className:m,onClick:u},h,{children:[r&&d===a.LEFT&&(0,l.jsx)("span",{className:f,"aria-hidden":"true"}),(0,l.jsx)("span",{children:t}),r&&d===a.RIGHT&&(0,l.jsx)("span",{className:f,"aria-hidden":"true"})]}))}},76116:function(e,n,t){var a=t(62540),l=(t(63696),t(5898)),r=t(91281);n.A=function(e){var n=e.containerClassName,t=e.headerTitle,c=e.checkBoxClassName,s=e.checkBoxTitle,i=e.listContainerClassName,o=e.accessClassName,d=e.listTitle,u=e.description,h=e.children;return(0,a.jsxs)("div",{className:n,children:[(0,a.jsx)("h2",{children:l.Ay.translate(t)}),(0,a.jsx)(r.A,{labelClassName:"checkboxContainer",className:c,title:s}),(0,a.jsxs)("div",{className:i,children:[(0,a.jsxs)("div",{className:o,children:[(0,a.jsx)("h3",{className:"checkboxListLabel",children:l.Ay.translate(d)}),(0,a.jsx)("div",{className:"checkboxList paperList",style:{padding:".5em 1em"},children:h})]}),(0,a.jsx)("div",{className:"fieldDescription",children:l.Ay.translate(u)})]})]})}},85817:function(e,n,t){var a=t(62540),l=(t(63696),t(5898));n.A=function(e){var n=e.is,t=e.id,r=e.className,c=e.title,s=e.icon,i=e.dataIndex,o=e.dataTag,d=e.dataProfileid,u=e.onClick,h=function(e){var n=e.id,t=e.className,a=e.title,l=e.icon,r=e.dataIndex,c=e.dataTag,s=e.dataProfileid;return{__html:'<button\n        is="'.concat(e.is,'"\n        type="button"\n        ').concat(n,'\n        class="').concat(t,'"\n        ').concat(a,"\n        ").concat(r,"\n        ").concat(c,"\n        ").concat(s,'\n    >\n        <span class="material-icons ').concat(l,'" aria-hidden="true"></span>\n    </button>')}}({is:n,id:t?'id="'.concat(t,'"'):"",className:r,title:c?'title="'.concat(l.Ay.translate(c),'"'):"",icon:s,dataIndex:i||0===i?'data-index="'.concat(i,'"'):"",dataTag:o?'data-tag="'.concat(o,'"'):"",dataProfileid:d?'data-profileid="'.concat(d,'"'):""});return void 0!==u?(0,a.jsx)("button",{style:{all:"unset"},dangerouslySetInnerHTML:h,onClick:u}):(0,a.jsx)("div",{dangerouslySetInnerHTML:h})}},91281:function(e,n,t){var a=t(62540),l=t(22696),r=t.n(l),c=(t(63696),t(5898)),s=function(e){var n=e.labelClassName,t=e.className,a=e.id,l=e.dataFilter,r=e.dataItemType,c=e.dataId,s=e.checkedAttribute,i=e.renderContent;return{__html:"<label ".concat(n,'>\n        <input\n            is="emby-checkbox"\n            type="checkbox"\n            class="').concat(t,'"\n            ').concat(a,"\n            ").concat(l,"\n            ").concat(r,"\n            ").concat(c,"\n            ").concat(s,"\n        />\n        ").concat(i,"\n    </label>")}};n.A=function(e){var n=e.labelClassName,t=e.className,l=e.elementId,i=e.dataFilter,o=e.itemType,d=e.itemId,u=e.itemAppName,h=e.itemCheckedAttribute,m=e.itemName,f=e.title,p=u?"- ".concat(u):"",y=m?"<span>".concat(r()(m||"")," ").concat(p,"</span>"):"<span>".concat(c.Ay.translate(f),"</span>");return(0,a.jsx)("div",{className:"sectioncheckbox",dangerouslySetInnerHTML:s({labelClassName:n?"class='".concat(n,"'"):"",className:t,id:l?"id='".concat(l,"'"):"",dataFilter:i?"data-filter='".concat(i,"'"):"",dataItemType:o?"data-itemtype='".concat(o,"'"):"",dataId:d?"data-id='".concat(d,"'"):"",checkedAttribute:h||"",renderContent:y})})}}}]);